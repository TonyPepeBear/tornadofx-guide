# 配置

要使用 TornadoFX ，有幾個選項可以使用，主流的自動建置工具如 [Gradle](http://gradle.org/) 和 [Maven](https://maven.apache.org/) 都支援且不會在使用過程中發生問題。

請記得 TornadoFX 是 Kotlin 的函式庫，所以你的專案必須要已經配置可以使用 Kotlin，使用 Gradle 和 Maven 的使用者可以參考 [Kotlin Gradle Setup](https://kotlinlang.org/docs/reference/using-gradle.html) 和 [Kotlin Maven Setup](https://kotlinlang.org/docs/reference/using-maven.html)，請確保您的開發環境或 IDE 對 Kotin 由完美的支援和豐富的外掛。

本教學在某些例子會使用 IDEA，IDEA 相較於 Eclipse 對 Kotlin 有更好的支援。

## Gradle

要使用 Gradle，必須設置 `dependency directly` 有 Maven Central，以下的 `x.y.z` 為本版本號。

```
repositories {
    mavenCentral()
}

// Minimum jvmTarget of 1.8 needed since Kotlin 1.1
compileKotlin {
    kotlinOptions.jvmTarget= 1.8
}

dependencies {
    compile 'no.tornado:tornadofx:x.y.z'
}
```

## Maven

### If you are using Oracle JDK

To import TornadoFX with Maven, add the following dependency to your POM file. Provide the desired version number for the  `x.y.z` placeholder.

Goes into kotlin-maven-plugin block:

```
<configuration>
    <jvmTarget>1.8</jvmTarget>
</configuration>
```

Then this goes into `dependencies` block:

```
<dependency>
    <groupId>no.tornado</groupId>
    <artifactId>tornadofx</artifactId>
    <version>x.y.z</version>
</dependency>
```

### If you are using OpenJDK

On Ubuntu 19.10, there is no longer any clean way to run OpenJDK 8 with JFX. OpenJDK in general does not include the JFX module libraries -- JFX support for OpenJDK is commonly provided by OpenJFX, which has a maven distribution as well as packages in various Linux distributions. However, the OpenJFX versions are tied to JDK versions (e.g. OpenJFX 8 is compatible with OpenJDK 8), and unfortunately the OpenJFX 8 version is not available in Ubuntu 19.10's packages, nor does it compile from source using the packaged OpenJDK 8.

The upshot of this is that if you wish to continue using OpenJDK (on Ubuntu), your options are:

1) Stay on OpenJDK 8 but install OpenJFX 8 system wide by adding older dependencies to your system (e.g. https://bugs.launchpad.net/ubuntu/+source/openjfx/+bug/1799946/comments/7)

2) Alternately, you can bite the bullet and upgrade to OpenJDK 11, and install OpenJFX via Maven. This solution is as follows:

a) Upgrade to OpenJDK 11 via your system's packaging tools.

b) Add maven dependencies:

```
        <dependency>
            <groupId>no.tornado</groupId>
            <artifactId>tornadofx</artifactId>
    	    <version>x.y.z</version>
        </dependency>

        <dependency>
            <groupId>org.openjfx</groupId>
            <artifactId>javafx</artifactId>
            <version>11.0.2</version>
        </dependency>
        <dependency>
            <groupId>org.openjfx</groupId>
            <artifactId>javafx-base</artifactId>
            <version>11.0.2</version>
        </dependency>
        <dependency>
            <groupId>org.openjfx</groupId>
            <artifactId>javafx-controls</artifactId>
            <version>11.0.2</version>
        </dependency>
```

c) Add the OpenJFX builder to your build/plugins section:
```
<build>
   <plugins>
       ...
	<plugin>
            <groupId>org.openjfx</groupId>
            <artifactId>javafx-maven-plugin</artifactId>
            <version>0.0.3</version>
            <configuration>
                <mainClass>MyMainApp</mainClass>
            </configuration>
        </plugin>
   </plugins>
</build>
```

d) Set the language level in your maven build to 11:
```
<build>
   <plugins>
	...
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>3.8.0</version>
            <configuration>
                <release>11</release>
            </configuration>
        </plugin>
    </plugins>
</plugin>
```

e) Finally, add src/main/kotlin/module-info.java, to set up permissioning in Java 11's module system.

```
module yourmodulename {
    requires javafx.controls;
    requires javafx.graphics;
    requires tornadofx;
    requires kotlin.stdlib;
    opens your.package.to.ui.classes;
}
```
If you are using IntelliJ, it will provide helpful prompts to add any additional modules that you may need for the build to succeed with your app. StackOverflow has a plethora of questions from Java programmers switching to the module system for the first time, so if you run into a module permissions related issue, google the error message for a solution.

(Variations on this section for other platforms are welcomed.)

## Other Build Automation Solutions

For instructions on how to use TornadoFX with other build automation solutions, please refer to the [TornadoFX page at the Central Repository](https://search.maven.org/artifact/no.tornado/tornadofx/)

## Manual Import

To manually download and import the JAR file, go to the [TornadoFX release page](https://github.com/edvin/tornadofx/releases) or the [Central Repository](https://search.maven.org). Download the JAR file and configure it into your project.
