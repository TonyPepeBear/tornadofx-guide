
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>JSON and REST · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="Dependency Injection.html" />
    
    
    <link rel="prev" href="Config Settings and State.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../part1/0. Subsection.html">
            
                <a href="../part1/0. Subsection.html">
            
                    
                    第一部分: TornadoFX 基本介紹
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../part1/1. Why TornadoFX.html">
            
                <a href="../part1/1. Why TornadoFX.html">
            
                    
                    1. 為什麼選擇 TornadoFX?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../part1/2. Setting Up.html">
            
                <a href="../part1/2. Setting Up.html">
            
                    
                    2. 配置
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../part1/3. Components.html">
            
                <a href="../part1/3. Components.html">
            
                    
                    3. 組件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../part1/4. Basic Controls.html">
            
                <a href="../part1/4. Basic Controls.html">
            
                    
                    4. Basic Controls
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="../part1/5. Data Controls.html">
            
                <a href="../part1/5. Data Controls.html">
            
                    
                    5. Data Controls
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6" data-path="../part1/6. CSS.html">
            
                <a href="../part1/6. CSS.html">
            
                    
                    6. Type Safe CSS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.7" data-path="../part1/7. Layouts and Menus.html">
            
                <a href="../part1/7. Layouts and Menus.html">
            
                    
                    7. Layouts and Menus
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.8" data-path="../part1/8. Charts.html">
            
                <a href="../part1/8. Charts.html">
            
                    
                    8. Charts
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.9" data-path="../part1/9. Shapes and Animation.html">
            
                <a href="../part1/9. Shapes and Animation.html">
            
                    
                    9. Shapes and Animation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.10" data-path="../part1/10. FXML.html">
            
                <a href="../part1/10. FXML.html">
            
                    
                    10. FXML
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.11" data-path="../part1/11. Editing Models and Validation.html">
            
                <a href="../part1/11. Editing Models and Validation.html">
            
                    
                    11. Editing Models and Validation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.12" data-path="../part1/12. TornadoFX IDEA Plugin.html">
            
                <a href="../part1/12. TornadoFX IDEA Plugin.html">
            
                    
                    12. TornadoFX IDEA Plugin
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="0. Subsection.html">
            
                <a href="0. Subsection.html">
            
                    
                    Part 2: TornadoFX Advanced Features
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="Property Delegates.html">
            
                <a href="Property Delegates.html">
            
                    
                    Property Delegates
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="Advanced Data Controls.html">
            
                <a href="Advanced Data Controls.html">
            
                    
                    Advanced Data Controls
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="OSGi.html">
            
                <a href="OSGi.html">
            
                    
                    OSGi
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="Scopes.html">
            
                <a href="Scopes.html">
            
                    
                    Scopes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="EventBus.html">
            
                <a href="EventBus.html">
            
                    
                    EventBus
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="Workspaces.html">
            
                <a href="Workspaces.html">
            
                    
                    Workspaces
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.7" data-path="Layout Debugger.html">
            
                <a href="Layout Debugger.html">
            
                    
                    Layout Debugger
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.8" data-path="Internationalization.html">
            
                <a href="Internationalization.html">
            
                    
                    Internationalization
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.9" data-path="Config Settings and State.html">
            
                <a href="Config Settings and State.html">
            
                    
                    Config Settings and State
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.3.10" data-path="JSON and REST.html">
            
                <a href="JSON and REST.html">
            
                    
                    JSON and REST
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.11" data-path="Dependency Injection.html">
            
                <a href="Dependency Injection.html">
            
                    
                    Dependency Injection
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.12" data-path="Wizard.html">
            
                <a href="Wizard.html">
            
                    
                    Wizard
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.13" data-path="Integration.html">
            
                <a href="Integration.html">
            
                    
                    Integrating with other tech
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../part3/0. Subsection.html">
            
                <a href="../part3/0. Subsection.html">
            
                    
                    Part 3: Cook Book
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../part3/Snippets.html">
            
                <a href="../part3/Snippets.html">
            
                    
                    Snippets
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >JSON and REST</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="json-and-rest">JSON and REST</h1>
<p>JSON has become the new standard for data exchange over HTTP. Working with JSON with the data types defined in <code>javax.json</code> is not hard, but a bit cumbersome. The TornadoFX JSON support comes<br>  in two forms: Enhancements to the <code>javax.json</code> objects and functions and a specialized REST client that does HTTP as well as automatic conversion between JSON and your domain models.</p>
<p>To facilitate conversion between these JSON objects and your model objects, you can choose to implement the interface JsonModel and one or both of the functions <code>updateModel</code> and <code>toJSON</code>.</p>
<p>Later in this chapter we will introduce the REST client, but the JSON Support can also be used standalone. The REST client calls certain functions on JsonModel objects during the lifecycle of an HTTP request.</p>
<p><code>updateModel</code> is called to convert a JSON object to your domain model. It receives a JSON object from which you can update the properties of your model object.</p>
<p><code>toJSON</code> is called to convert your model object to a JSON payload. It receives a <code>JsonBuilder</code> where you can set the values of the model object.</p>
<pre><code class="lang-kotlin"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span> : <span class="hljs-type">JsonModel {</span></span>
    <span class="hljs-variable"><span class="hljs-keyword">val</span> idProperty</span> = SimpleIntegerProperty()
    <span class="hljs-variable"><span class="hljs-keyword">var</span> id by idProperty

    <span class="hljs-keyword">val</span> firstNameProperty</span> = SimpleStringProperty()
    <span class="hljs-variable"><span class="hljs-keyword">var</span> firstName by firstNameProperty

    <span class="hljs-keyword">val</span> lastNameProperty</span> = SimpleStringProperty()
    <span class="hljs-variable"><span class="hljs-keyword">var</span> lastName by lastNameProperty

    <span class="hljs-keyword">val</span> phones</span> = FXCollections.observableArrayList<span class="hljs-type">&lt;Phone&gt;</span>()

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateModel</span><span class="hljs-params">(json: <span class="hljs-type">JsonObject</span>)</span> {</span>
        with(json) {
            id = int(<span class="hljs-string">&quot;id&quot;</span>)
            firstName = string(<span class="hljs-string">&quot;firstName&quot;</span>)
            lastName = string(<span class="hljs-string">&quot;lastName&quot;</span>)
            phones.setAll(getJsonArray(<span class="hljs-string">&quot;phones&quot;</span>).toModel())
        }
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">toJSON</span><span class="hljs-params">(json: <span class="hljs-type">JsonBuilder</span>)</span> {</span>
        with(json) {
            add(<span class="hljs-string">&quot;id&quot;</span>, id)
            add(<span class="hljs-string">&quot;firstName&quot;</span>, firstName)
            add(<span class="hljs-string">&quot;lastName&quot;</span>, lastName)
            add(<span class="hljs-string">&quot;phones&quot;</span>, phones.toJSON())
        }
    }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Phone</span> : <span class="hljs-type">JsonModel {</span></span>
    <span class="hljs-variable"><span class="hljs-keyword">val</span> idProperty</span> = SimpleIntegerProperty()
    <span class="hljs-variable"><span class="hljs-keyword">var</span> id by idProperty

    <span class="hljs-keyword">val</span> numberProperty</span> = SimpleStringProperty()
    <span class="hljs-variable"><span class="hljs-keyword">var</span> number by numberProperty

    override fun updateModel(json</span>: JsonObject) {
        with(json) {
            id = int(<span class="hljs-string">&quot;id&quot;</span>)
            number = string(<span class="hljs-string">&quot;number&quot;</span>)
        }
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">toJSON</span><span class="hljs-params">(json: <span class="hljs-type">JsonBuilder</span>)</span> {</span>
        with(json) {
            add(<span class="hljs-string">&quot;id&quot;</span>, id)
            add(<span class="hljs-string">&quot;number&quot;</span>, number)
        }
    }
}
</code></pre>
<blockquote>
<p>JsonModel with getters/setters and property() accessor functions to be JavaFX Property compatible</p>
</blockquote>
<p>When you implement <code>JsonModel</code> you also get the <code>copy</code> function, which creates a copy of your model object.</p>
<p>Tornado FX also comes with special support functions for reading and writing JSON properties. Please see the bottom of <a href="https://github.com/edvin/tornadofx/blob/master/src/main/java/tornadofx/Json.kt" target="_blank">Json.kt</a> for an exhaustive list.</p>
<p>All the JSON retrieval functions accepts a vararg argument for the key in the JSON document. The first key available in the document will be used to retrieve the value. This makes it easier to work with slightly inconsistent JSON schemes or can be used as a ternary to provide a fallback value for example.</p>
<h2 id="configuring-datetime">Configuring datetime</h2>
<p>The <code>datetime(key)</code> function used to retrieve a <code>LocalDateTime</code> object from JSON will by default expect a value of &quot;Seconds since epoch&quot;. If your external webservice expects &quot;Milliseconds since epoch&quot; instead,<br>you can either send <code>datetime(key, millis = true)</code> or configure it globally by setting <code>JsonConfig.DefaultDateTimeMillis = true</code>.</p>
<h2 id="generating-json-objects">Generating JSON objects</h2>
<p>The <code>JsonBuilder</code> is an abstraction over <code>javax.json.JsonObjectBuilder</code> that supports null values. Instead of blowing up, it silently dismisses the missing entry, which enables you to build your JSON object graph<br>more fluently without checking for nulls.</p>
<h1 id="rest-client">REST Client</h1>
<p>The REST Client that makes it easy to perform JSON based REST calls. The underlying HTTP engine interface has two implementations. The default uses HttpURLConnection and there is also an implementation based on Apache HttpClient. It is easy to extend the <code>Rest.Engine</code> to support other http client libraries if needed.</p>
<p>To use the Apache HttpClient implementation, simply call <code>Rest.useApacheHttpClient()</code> in the <code>init</code> method of your App class and include the <code>org.apache.httpcomponents:httpclient</code> dependency in your project descriptor.</p>
<h2 id="configuration">Configuration</h2>
<p>If you mostly access the same api on every call, you can set a base uri so subsequent calls only need to include relative urls. You can configure the base url anywhere you like, but the <code>init</code> function of your <code>App</code> class is a good place to do it.</p>
<pre><code class="lang-kotlin"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyApp</span> : <span class="hljs-type">App</span></span>() {
    <span class="hljs-variable"><span class="hljs-keyword">val</span> api</span>: Rest by inject()

    init {
        api.baseURI = <span class="hljs-string">&quot;https://contoso.com/api&quot;</span>
    }
}
</code></pre>
<h2 id="basic-operations">Basic operations</h2>
<p>There are convenience functions to perform <code>GET</code>, <code>PUT</code>, <code>POST</code> and <code>DELETE</code> operations.</p>
<pre><code class="lang-kotlin"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CustomerController</span> : <span class="hljs-type">Controller</span></span>() {
    <span class="hljs-variable"><span class="hljs-keyword">val</span> api</span>: Rest by inject()

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">loadCustomers</span><span class="hljs-params">()</span>: ObservableList<span class="hljs-type">&lt;Customer&gt;</span> =</span>
        api.<span class="hljs-keyword">get</span>(<span class="hljs-string">&quot;customers&quot;</span>).list().toModel()
}
</code></pre>
<blockquote>
<p>CustomerController with loadCustomers call</p>
</blockquote>
<p>So, what exactly is going on in the <code>loadCustomers</code> function? First we call <code>api.get(&quot;customers&quot;)</code> which will perform the call and return a <code>Response</code> object. We then call <code>Response.list()</code> which will consume the response and convert it to a <code>javax.json.JsonArray</code>. Lastly, we call the extension function <code>JsonArray.toModel()</code> which creates one <code>Customer</code> object per <code>JsonObject</code> in the array and calls <code>JsonModel.updateModel</code> on it. In this example, the type argument is taken from the function return type, but you could also write the above method like this if you prefer:</p>
<pre><code class="lang-kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">loadCustomers</span><span class="hljs-params">()</span> = api.<span class="hljs-title">get</span><span class="hljs-params">(&quot;customers&quot;)</span>.<span class="hljs-title">list</span><span class="hljs-params">()</span>.toModel<span class="hljs-type">&lt;Customer&gt;</span><span class="hljs-params">()</span></span>
</code></pre>
<p>How you provide the type argument to the <code>toModel</code> function is a matter of taste, so choose the syntax you are most comfortable with.</p>
<p>These functions take an optional parameter with either a <code>JsonObject</code> or a <code>JsonModel</code> that will be the payload of your request, converted to a JSON string.</p>
<p>The following example updates a customer object.</p>
<pre><code class="lang-kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateCustomer</span><span class="hljs-params">(customer: <span class="hljs-type">Customer</span>)</span> = api.<span class="hljs-title">put</span><span class="hljs-params">(&quot;customers/${customer.id}&quot;, customer)</span></span>
</code></pre>
<p>If the api endpoint returns the customer object to us after save, we would fetch a JsonObject by calling <code>one()</code> and then <code>toModel()</code> to convert it back into our model object.</p>
<pre><code class="lang-kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateCustomer</span><span class="hljs-params">(customer: <span class="hljs-type">Customer</span>)</span> =</span>
    api.put(<span class="hljs-string">&quot;customers/${customer.id}&quot;</span>, customer).one().toModel<span class="hljs-type">&lt;Customer&gt;</span>()
</code></pre>
<h2 id="query-parameters">Query parameters</h2>
<p>Query parameters needs to be URL encoded. The <code>Map.queryString</code> extension value will turn any map into a properly URL encoded query string:</p>
<pre><code class="lang-kotlin"><span class="hljs-variable"><span class="hljs-keyword">val</span> params</span> = mapOf(<span class="hljs-string">&quot;id&quot;</span> to <span class="hljs-number">1</span>)
api.put(<span class="hljs-string">&quot;customers${params.queryString}&quot;</span>, customer).one().toModel<span class="hljs-type">&lt;Customer&gt;</span>()
</code></pre>
<p>This will call the URI <code>customers?id=1</code>.</p>
<h2 id="error-handling">Error handling</h2>
<p>If an I/O error occurs during the processing of the request, the default Error Handler will report the error to the user. You can of course catch any errors yourself instead. To handle HTTP return codes, you might want to inspect the <code>Response</code> before you convert the result to JSON. Make sure you always call <code>consume()</code> on the response if you don&apos;t extract data from it using any of the methods <code>list()</code>, <code>one()</code>, <code>text()</code> or <code>bytes()</code>.</p>
<pre><code class="lang-kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getCustomer</span><span class="hljs-params">(id: <span class="hljs-type">Int</span>)</span>: Customer {</span>
    <span class="hljs-variable"><span class="hljs-keyword">val</span> response</span> = api.<span class="hljs-keyword">get</span>(<span class="hljs-string">&quot;some/action&quot;</span>)

    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">if</span> (response.ok())
            <span class="hljs-keyword">return</span> response.one().toModel()
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (response.statusCode == <span class="hljs-number">404</span>)
            <span class="hljs-keyword">throw</span> CustomerNotFound()
        <span class="hljs-keyword">else</span>
            <span class="hljs-keyword">throw</span> MyException(<span class="hljs-string">&quot;getCustomer returned ${response.statusCode} ${response.reason}&quot;</span>)
    } <span class="hljs-keyword">finally</span> {
        response.consume()
    }
}
</code></pre>
<blockquote>
<p>Extract status code and reason from <code>HttpResponse</code></p>
</blockquote>
<p><code>response.ok()</code> is shorthand for <code>response.statusCode == 200</code>.</p>
<h2 id="authentication">Authentication</h2>
<p>Tornado FX makes it very easy to add basic authentication to your api requests:</p>
<pre><code class="lang-kotlin">api.setBasicAuth(<span class="hljs-string">&quot;username&quot;</span>, <span class="hljs-string">&quot;password&quot;</span>)
</code></pre>
<p>To configure authentication manually, configure the <code>requestInterceptor</code> of the engine to add custom headers etc to the request. For example, this is how the basic authentication is implemented for the <code>HttpUrlEngine</code>:</p>
<pre><code class="lang-kotlin">requestInterceptor = { request -&gt;
    <span class="hljs-variable"><span class="hljs-keyword">val</span> b64</span> = Base64.getEncoder().encodeToString(<span class="hljs-string">&quot;$username:$password&quot;</span>.toByteArray(UTF_8))
    request.addHeader(<span class="hljs-string">&quot;Authorization&quot;</span>, <span class="hljs-string">&quot;Basic $b64&quot;</span>)
}
</code></pre>
<p>For a more advanced example of configuring the underlying client, take a look at how basic authentication is implemented in the <code>HttpClientEngine.setBasicAuth</code> function in <a href="https://github.com/edvin/tornadofx/blob/master/src/main/java/tornadofx/Rest.kt" target="_blank">Rest.kt</a>.</p>
<h2 id="intercepting-calls">Intercepting calls</h2>
<p>You can for example show a login screen if an HTTP call fails with statusCode 401:</p>
<pre><code class="lang-kotlin">api.engine.responseInterceptor = { response -&gt;
    <span class="hljs-keyword">if</span> (response.statusCode == <span class="hljs-number">401</span>)
        showLoginScreen(<span class="hljs-string">&quot;Invalid credentials, please log in again.&quot;</span>)
}
</code></pre>
<h2 id="setting-timeouts">Setting timeouts</h2>
<p>You can configure the read timeout for the default provider by using a <code>requestInterceptor</code> and casting the request to <code>HttpURLRequest</code> before yo operate on it.</p>
<pre><code class="lang-kotlin">api.engine.requestInterceptor = {
    (it <span class="hljs-keyword">as</span> HttpURLRequest).connection.readTimeout = <span class="hljs-number">5000</span>
}
</code></pre>
<p>You can configure the <code>connectionTimeout</code> of the <code>HTTPUrlConnection</code> object above in the same way.</p>
<h2 id="connect-to-multiple-apis">Connect to multiple API&apos;s</h2>
<p>You can create multiple instances of the <code>Rest</code> class by subclassing it and configuring each subclass as you wish. Injection of subclasses work seamlessly. Override the <code>engine</code> property if you want to use another engine than the default.</p>
<h2 id="default-engine-for-new-rest-instances">Default engine for new Rest instances</h2>
<p>The engine used by a new Rest client is configured with the <code>engineProvider</code> of the Rest class. This is what happens when you call <code>Rest.useApacheHttpClient</code>:</p>
<pre><code class="lang-kotlin">Rest.engineProvider = { rest -&gt; HttpClientEngine(rest) }
</code></pre>
<blockquote>
<p>The <code>engineProvider</code> returns a concrete <code>engine</code> implementation that is given the current <code>Rest</code> instance as argument.</p>
</blockquote>
<p>You can override the configured <code>engine</code> in a <code>Rest</code> instance at any time.</p>
<h2 id="proxy">Proxy</h2>
<p>A proxy can be configured either by implementing an interceptor that augments each call, or, preferably once per Rest client instance:</p>
<pre><code class="lang-kotlin">rest.proxy = Proxy(Proxy.Type.HTTP, InetSocketAddress(<span class="hljs-string">&quot;127.0.0.1&quot;</span>, <span class="hljs-number">8080</span>))
</code></pre>
<h2 id="sequence-numbers">Sequence numbers</h2>
<p>If you do multiple http calls they will not be pooled and returned in the order you executed the calls. Any http request will return as soon as it is available. If you want to handle them in sequence, or even discard older results, you can use the <code>Response.seq</code> value which will contain a <code>Long</code> sequence number.</p>
<h2 id="progress-indicator">Progress indicator</h2>
<p>Tornado FX comes with a HTTP ProgressIndicator View. This view can be embedded in your application and will show you information about ongoing REST calls. Embed the <code>RestProgressBar</code> into a <em>ToolBar</em> or any other parent container:</p>
<pre><code class="lang-kotlin">toolbar.add(RestProgressBar::<span class="hljs-class"><span class="hljs-keyword">class</span>)</span>
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="Config Settings and State.html" class="navigation navigation-prev " aria-label="Previous page: Config Settings and State">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="Dependency Injection.html" class="navigation navigation-next " aria-label="Next page: Dependency Injection">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"JSON and REST","level":"1.3.10","depth":2,"next":{"title":"Dependency Injection","level":"1.3.11","depth":2,"path":"part2/Dependency Injection.md","ref":"part2/Dependency Injection.md","articles":[]},"previous":{"title":"Config Settings and State","level":"1.3.9","depth":2,"path":"part2/Config Settings and State.md","ref":"part2/Config Settings and State.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"part2/JSON and REST.md","mtime":"2020-02-13T15:46:37.954Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2020-02-13T15:47:39.413Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

